<html>
  <body>

  <!-- форма для отправки сообщений -->
  <form name="publish">
    <input type="text" name="message"/>
    <input type="submit" value="Отправить"/>
  </form>

    <p id='subscribe'></p>
    <script>
      var HOST = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(HOST);

      ws.onmessage = function (event) {
        var messageElem = document.createElement('div');
        messageElem.appendChild(document.createTextNode(event.data));
        document.getElementById('subscribe').appendChild(messageElem);

      };

      document.forms.publish.onsubmit = function() {
          var outgoingMessage = this.message.value;

          ws.send(outgoingMessage);
          return false;
      };


    </script>
  </body>
</html>
